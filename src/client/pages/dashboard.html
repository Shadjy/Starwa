<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>
  <link rel="stylesheet" href="../css/global.css">
  <link rel="stylesheet" href="../css/berichten.css">
  <link rel="stylesheet" href="../css/dashboard.css">
</head>
<body>

  <header class="app-header">
    <div class="app-header__inner">
      <a class="app-header__logo" href="/dashboard" aria-label="Ga naar dashboard">Starwa</a>
      <div class="app-header__title">
        <h1>Dashboard</h1>
      </div>
      <button class="profile-chip app-header__profile" id="headerProfileBtn" type="button" aria-label="Open profiel" data-avatar="">
        <span class="profile-chip__avatar" aria-hidden="true" data-has-photo="false">
          <img src="" alt="" />
          <span class="profile-chip__initials">LJ</span>
        </span>
        <span class="profile-chip__name">Leo de Jong</span>
      </button>
      <a class="profile-chip message-chip app-header__messages" href="/berichten" aria-label="Open berichten">
        <span class="message-chip__icon" aria-hidden="true">
          <svg viewBox="0 0 20 20" focusable="false" aria-hidden="true">
            <path d="M3.25 4.75h13.5c.55 0 1 .45 1 1v8.5c0 .55-.45 1-1 1h-4.5l-3.25 2.5V15.25H3.25c-.55 0-1-.45-1-1v-8.5c0-.55.45-1 1-1Z" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"></path>
          </svg>
        </span>
        <span class="profile-chip__name">Berichten</span>
        <span class="message-chip__badge" data-unread="4" aria-live="polite">4</span>
      </a>
      <a href="/home" class="logout app-header__logout">
        <img src="../assests/icons/logout.png" alt="Logout" class="logout-logo">
        <span class="logout-text">Log uit</span>
      </a>
    </div>
  </header>

  <main class="dashboard">

    <section class="cards-container">

      <!-- Matches-->
      <div class="card matches">
        <div class="card-header">
          <h2>Matches</h2>
          <button class="view-all">Bekijk alle matches</button>
        </div>
        <div class="card-content">
          <div class="job" data-id="1">
            <h3>Frontend Developer</h3>
            <p>Locatie: Amsterdam</p>
            <p>Salaris: €3.000 - €4.000</p>
            <span class="match-score">87%</span>
          </div>
          <div class="job" data-id="2">
            <h3>UX Designer</h3>
            <p>Locatie: Utrecht</p>
            <p>Salaris: €2.800 - €3.500</p>
            <span class="match-score">75%</span>
          </div>
          <div class="job" data-id="3">
            <h3>Backend Developer</h3>
            <p>Locatie: Rotterdam</p>
            <p>Salaris: €3.500 - €4.500</p>
            <span class="match-score">92%</span>
          </div>
        </div>
      </div>

      <!-- Berichten-->
      <div class="card messages">
        <div class="card-header">
          <h2>Berichten</h2>
          <button class="view-all">Bekijk alle berichten</button>
        </div>
        <div class="card-content">
          <div class="message">
            <h3>Je hebt een match!</h3>
            <p>Hallo Leo, ik zag je profiel en denk dat je goed past bij ons team..</p>
            <span class="time">Verstuurd: 3 uur geleden</span>
          </div>
          <div class="message">
            <h3>HR Manager</h3>
            <p>We hebben je sollicitatie ontvangen en willen je uitnodigen voor een gesprek...</p>
            <span class="time">Verstuurd: gisteren</span>
          </div>
          <div class="message">
            <h3>Teamleider</h3>
            <p>Je profiel spreekt ons aan. Kunnen we een kennismakingsgesprek plannen?</p>
            <span class="time">Verstuurd: 2 dagen geleden</span>
          </div>
        </div>
      </div>

    </section>
  </main>

  <script src="../js/dashboard.js"></script>
  <script>
    (() => {
      document.querySelectorAll(".message-chip__badge").forEach((badge) => {
        const count = Number(badge.dataset.unread || badge.textContent || 0);
        const displayValue = count > 9 ? "9+" : String(count);
        badge.textContent = displayValue;
        badge.classList.toggle("is-max", count > 9);
        badge.classList.toggle("is-empty", count === 0);
        badge.setAttribute("aria-label", `${count} ongelezen berichten`);
      });
    })();
  </script>
</body>
</html>
